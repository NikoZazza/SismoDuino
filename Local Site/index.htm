<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"  name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Home &middot; SismoDuino</title>
	<link rel="stylesheet" href="./css/bs-min.css">
	<link rel="stylesheet" href="./css/bs-t-min.css">
    <script src="./js/jquery.js"></script>
	<script src="./js/bs-min.js"></script>
    <script src="./js/chart.js"></script>
</head>
<body>

<nav class="navbar navbar-default" style="padding 0px">
	<div class="container-fluid">
    	<div class="navbar-header">
      		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
        		<span class="sr-only">Toggle navigation</span>
        		<span class="icon-bar"></span>
        		<span class="icon-bar"></span>
        		<span class="icon-bar"></span>
      		</button>
            <ul class="nav navbar-nav navbar-left">
                <li id="nav_index" class="">
                    <a href="index.html"  class="navbar-brand" >SismoDuino</a>
                </li>
            </ul>
		</div>

        <div class="collapse navbar-collapse" id="navbar-collapse">
            <ul class="nav navbar-nav">
                <li id="nav_stats">
                    <a href="stats.html">Statistiche</a>
                </li>
                <li id="nav_settings">
                    <a href="settings.html">Impostazioni</a>
                </li>
            </ul>
        </div>
	</div>
</nav>
<div class="container">
	<div align="center">
		<img src="./img/logo.png" style="width:90%">    
    </div>
    <br>    
    <div class="jumbotron" style="padding: 10px" align="center">
    	<b>SismoDuino</b>= <i>prototipo di un sismografo digitale creato con "Arduino"</i>
    </div>    
    <br>
    <div class="container">
    <div class="col-md-6">
        <div class="panel panel-default" style="min-width: 520px">
        	<div class="panel-heading">Ultimi dati del sensore</div>
            <div class="panel-body ">
				
                <canvas id="myChart" width="500px" height="300px"></canvas>
            </div>
        </div>
        </div>
        <div class="col-md-6">
        <div class="panel panel-default" style="min-width: 520px">
        	<div class="panel-heading">Posizione approssimativa</div>
            <div class="panel-body">
				<div id="map" style="width: 500px;height:300px"></div>
            </div>
        </div>
        </div>
    </div>
	<div class="jumbotron container" style="padding: 10px">
    	<div class="col-md-4">Licence GNU v3.0</div>
        <div class="col-md-4"><a align="center" href="https://github.com/xionbig/SismoDuino">Project on GitHub</a></div>
        <div class="col-md-4"><i>Mykola Zatsarynnyy</i></div>
    </div> 
    <br><br><br>
</div>
</body>

<script>
$(document).ready(function(){
load();
	l = location.href;
	l = l.substr(l.lastIndexOf("/")+1).split(/[?#]/)[0].split(".")[0];
  	if(l == "index"){
  		document.getElementById("nav_index").className = "active";
    
	}
  	if(l == "stats"){
    
	}
  	if(l == "settings"){
    
  	}
    
  	var count = 15;
  	var foo = [];
	var foo1 = [];
	for (var i = 1; i <= 15; i++) {
   		foo.push(i);
        foo1.push(0);
	}
  var data = {
  
	  labels : foo,
		datasets : [
		  {
				fillColor : "rgba(255,187,205,0.5)",
				strokeColor : "rgba(255,0,0,1)",
				pointColor : "rgba(220,220,220,0)",
				pointStrokeColor : "",
				data : foo1
			},
			{
				fillColor : "rgba(255,0,0,0)",
				strokeColor : "rgba(0,0, 255,0.9)",
				pointColor : "rgba(151,187,205,0)",
				pointStrokeColor : "rgba(0,0,0,0)",
				data : foo1
			},
            {
				fillColor : "rgba(220,220,220,0)",
				strokeColor : "rgba(255,165,0,0.9)",
				pointColor : "rgba(151,187,205,0)",
				pointStrokeColor : "rgba(0,0,0,0)",
				data : foo1
			},
            {
				fillColor : "rgba(220,220,220,0)",
				strokeColor : "rgba(255,255,0,0.9)",
				pointColor : "rgba(151,187,205,0)",
				pointStrokeColor : "rgba(0,0,0,0)",
				data : foo1
			},
            {
				fillColor : "rgba(220,220,220,0)",
				strokeColor : "rgba(255,255,0,0)",
				pointColor : "rgba(151,187,205,0)",
				pointStrokeColor : "rgba(0,0,0,0)",
				data : [15]
			}
            
		]
  }
  // this is ugly, don't judge me
  var updateData = function(oldData){
    var labels = oldData["labels"];
    var dataSetA = oldData["datasets"][0]["data"];
    var dataSetB = oldData["datasets"][1]["data"];
    var dataSetC = oldData["datasets"][2]["data"];
    var dataSetD = oldData["datasets"][3]["data"];
    var dataSetE = oldData["datasets"][4]["data"];
    labels.shift();
    count++;
    labels.push(count.toString());
    var newDataA = 0;
    var newDataB = 0;
    var newDataC = 0;
    var newDataD = 0;
    dataSetA.push(newDataA);
    dataSetB.push(newDataB);
    dataSetC.push(newDataC);
    dataSetD.push(newDataD);
    dataSetE.push(15);
    dataSetA.shift();
    dataSetB.shift();   
    dataSetC.shift(); 
    dataSetD.shift();
    dataSetE.shift();
 };
      
  	var optionsAnimation = {
		scaleOverride : true,
	    scaleSteps : 20,
    	scaleStepWidth : 1,
    	scaleStartValue : 0
	}
  	var optionsNoAnimation = {
    	scaleOverride :false,
        scaleSteps : 10,
        scaleStepWidth : 10,
        scaleStartValue : 0    
  	}  
  //Get the context of the canvas element we want to select
  var ctx = document.getElementById("myChart").getContext("2d");
  var optionsNoAnimation = {animation : false}
  var myNewChart = new Chart(ctx);
  myNewChart.Line(data, optionsAnimation);	
  
  setInterval(function(){
    updateData(data);
    myNewChart.Line(data, optionsNoAnimation)
    ;}, 500
  );
});

 </script>
<script src="http://maps.google.com/maps?file=api&v=2&key=AIzaSyDwiiU_PgPr62FbQPo7BQoYbM-vngjyq5I" type="text/javascript"></script>
 
  <script type="text/javascript">
    function load() {
    var map = new GMap2(document.getElementById("map"));
        map.addControl(new GLargeMapControl());
        map.addControl(new GMapTypeControl());
        map.setCenter(new GLatLng(53.35, 23.06), 3);
    
    }
  </script>

</html>
